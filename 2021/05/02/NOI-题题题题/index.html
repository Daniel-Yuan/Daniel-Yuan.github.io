<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="因为有四年所以有四个题字。 都是博主的个人想法，不保证做法简洁。">
<meta property="og:type" content="article">
<meta property="og:title" content="NOI 题题题题">
<meta property="og:url" content="http://example.com/2021/05/02/NOI-%E9%A2%98%E9%A2%98%E9%A2%98%E9%A2%98/index.html">
<meta property="og:site_name" content="Daniel_yuan&#39;s Blog">
<meta property="og:description" content="因为有四年所以有四个题字。 都是博主的个人想法，不保证做法简洁。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-05-02T07:32:04.000Z">
<meta property="article:modified_time" content="2021-05-02T23:52:03.861Z">
<meta property="article:author" content="Daniel_yuan">
<meta property="article:tag" content="NOI">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2021/05/02/NOI-%E9%A2%98%E9%A2%98%E9%A2%98%E9%A2%98/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>NOI 题题题题 | Daniel_yuan's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

  <script type="text/javascript" src="/js/love.js"></script>
<link rel="alternate" href="/atom.xml" title="Daniel_yuan's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Daniel_yuan's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">芙卡米天下第一可爱 n(*≧▽≦*)n</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/02/NOI-%E9%A2%98%E9%A2%98%E9%A2%98%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/duck.jpg">
      <meta itemprop="name" content="Daniel_yuan">
      <meta itemprop="description" content="Fkami is our sun !">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daniel_yuan's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          NOI 题题题题
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-02 15:32:04" itemprop="dateCreated datePublished" datetime="2021-05-02T15:32:04+08:00">2021-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-03 07:52:03" itemprop="dateModified" datetime="2021-05-03T07:52:03+08:00">2021-05-03</time>
              </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><del>因为有四年所以有四个题字。</del></p>
<p>都是博主的个人想法，不保证做法简洁。</p>
<a id="more"></a>
<hr />
<h3 id="noi-2017">NOI 2017</h3>
<h4 id="整数">整数</h4>
<p>模拟。</p>
<p>发现要快速进退位，于是用个线段树维护区间是不是全 <code>1</code> 或者全 <code>0</code>，然后二分。</p>
<p>发现二分可以在线段树里面，所以直接线段树上二分。</p>
<p>发现一个线段树节点只维护一位效率太低，于是直接压位。</p>
<p>复杂度 <span class="math inline">\(O(n\log\frac{30n}{\omega})\)</span>。</p>
<h4 id="蚯蚓排队">蚯蚓排队</h4>
<p>模拟。</p>
<p>只看修改直接暴力的复杂度就是对的，因为均摊 <span class="math inline">\(nk\)</span> 个串每个串长度 <span class="math inline">\(O(k)\)</span>，而 <code>2</code> 操作会增加最多 <span class="math inline">\(k^2\)</span> 个长度为 <span class="math inline">\(O(k)\)</span> 的串，而 <code>2</code> 操作只有 <span class="math inline">\(10^3\)</span> 个。</p>
<p>考虑怎么查询。愚蠢的博主看到收尾加删就直接上 SAM 了，殊不知直接哈希就可以了。查询复杂度是 <span class="math inline">\(O(|S|)\)</span> 的。</p>
<h4 id="泳池">泳池</h4>
<p>求限制下边界的极大子矩形直接上笛卡尔树即可。</p>
<p>直接设 <span class="math inline">\(f_{i,x,0/1}\)</span> 表示长度为 <span class="math inline">\(i\)</span> 的区间，下边界都不是危险的，高度最小值为 <span class="math inline">\(x\)</span>，大小达没达到 <span class="math inline">\(k\)</span> 的方案数。转移的时候枚举最大值的位置，然后对 <span class="math inline">\(x\)</span> 后缀和即可。卡下 <span class="math inline">\(x\)</span> 的上界复杂度就是调和级数，<span class="math inline">\(O(k^2\ln k)\)</span>。</p>
<p>然后把每个 <span class="math inline">\(f\)</span> 后面绑上一个下边界是危险的格子对 <span class="math inline">\(n\)</span> 跑 DP，设 <span class="math inline">\(dp_{i,0/1}\)</span> 表示考虑前 <span class="math inline">\(i\)</span> 列，当前大小达没达到 <span class="math inline">\(k\)</span> 的方案数。枚举最后一段的大小即可。</p>
<p><span class="math inline">\(K\leq 1000\)</span> 显然不能矩阵快速幂，考虑常系数齐次线性递推，不用 NTT 直接暴力多项式即可。复杂度 <span class="math inline">\(O(k^2\log n)\)</span>。</p>
<h4 id="游戏">游戏</h4>
<p>如果没有 <code>x</code> 直接大力 2-SAT。</p>
<p>有 <code>x</code> 就枚举一下 <code>x</code> 到底取什么。</p>
<p>暴力一点就 <span class="math inline">\(3^k\)</span>，实测可过，但实际上只需要枚举 <span class="math inline">\(2^k\)</span> 就可以包含所有可能状态。</p>
<p>复杂度 <span class="math inline">\(O(2^k(2n+2m))\)</span>。</p>
<h4 id="蔬菜">蔬菜</h4>
<p>正难则反。以退为进。</p>
<p>把退菜变成进菜问题就容易很多。直接整个俩堆即可，一个放 <span class="math inline">\(x=0\)</span> 的，一个放每天都在进菜且菜的 <span class="math inline">\(x&gt;1\)</span> 的。前者用一个少一个，所以直接取出前 <span class="math inline">\(m\)</span> 个来。后者取出前 <span class="math inline">\(m\)</span> 个来后，因为每个菜在这一天至少进一个，所以也至少有 <span class="math inline">\(m\)</span> 个，在这 <span class="math inline">\(2m\)</span> 大的里面选 <span class="math inline">\(m\)</span> 大的即可。</p>
<p>这样还是暴力了点，因为询问太多了。</p>
<p>不能发现第 <span class="math inline">\(k\)</span> 天的答案必然包含第 <span class="math inline">\(k-1\)</span> 天的。因为第 <span class="math inline">\(k\)</span> 天能用的菜第 <span class="math inline">\(k-1\)</span> 天也能用。所以从第 <span class="math inline">\(k\)</span> 天推到第 <span class="math inline">\(k-1\)</span> 天直接删掉 <span class="math inline">\(m\)</span> 个菜即可。</p>
<p>复杂度 <span class="math inline">\(O(nm\log n)\)</span>。</p>
<h4 id="分身术">分身术</h4>
<p>毒瘤计算几何。暴力水 <span class="math inline">\(20\)</span> 分得了。</p>
<p>对于 <span class="math inline">\(K=1\)</span>，直接预处理。凸包上第 <span class="math inline">\(x\)</span> 个点删掉之后，只有极角序在凸包上第 <span class="math inline">\(x-1\)</span> 到 <span class="math inline">\(x+1\)</span> 个点之间的点可能会在凸包上。每个点只会被扫两次，复杂度正确。</p>
<p>懒得复读题解。</p>
<h4 id="总结">总结</h4>
<p>考察算法全面，类型新颖，部分分足，区分度高，不失为一套好 NOI 题。</p>
<p><del>正经的总结懒得写。</del></p>
<hr />
<h3 id="noi-2018">NOI 2018</h3>
<h4 id="归程">归程</h4>
<p>Kruskal 重构树 + Dijkstra 最短路 + 树上倍增。</p>
<p>懂的都懂。</p>
<h4 id="冒泡排序">冒泡排序</h4>
<p>把所有 <span class="math inline">\(p_i&gt; i\)</span> 和 <span class="math inline">\(p_i\leq i\)</span> 的拿出来形成两个序列，这两个序列必须都是单调递增的。</p>
<p>考虑 DP 前者，后者直接把剩下的数 <code>sort</code> 即可。</p>
<p>设 <span class="math inline">\(f_{i,j}\)</span> 表示考虑前 <span class="math inline">\(i\)</span> 个数，前缀最大值为 <span class="math inline">\(j\)</span> 的方案数。如果当前点不放数，就 <span class="math inline">\(f_{i,j}\leftarrow f_{i-1,j}\)</span>，否则当前点放 <span class="math inline">\(j\)</span>，那么就有 <span class="math inline">\(f_{i,j}\leftarrow f_{i-1,k}(k&lt;j)\)</span>。</p>
<p>对于求答案，类似数位 DP，强制一个前缀等于 <span class="math inline">\(q\)</span>，接下来的那一位强制大于 <span class="math inline">\(q\)</span>，注意到这里需要强制字典序大小，所以需要用到容斥，即 <span class="math inline">\(p_i&gt;i\)</span> 的序列个数减去 <span class="math inline">\(p_i&gt;i\)</span> 的序列中不包含 <span class="math inline">\(i\)</span> 的序列个数。这里可以直接调用 DP 值。</p>
<p>考虑优化 DP。其中 <span class="math inline">\(f_{i,j}\)</span> 相当于是把 <span class="math inline">\(j\sim n\)</span> 填到 <span class="math inline">\(i\sim n\)</span> 中，一个位置要么不放要么 <span class="math inline">\(p_i\leq i\)</span> 的方案数。考虑把空位全部归给后面的数，在 <span class="math inline">\(n+1\)</span> 放一个标志符。这样就相当于每个数要分配一个数 <span class="math inline">\(x\)</span>，其中 <span class="math inline">\(x=0\)</span> 表示不放，<span class="math inline">\(x&gt;0\)</span> 表示占用 <span class="math inline">\(x\)</span> 个位置，且在第 <span class="math inline">\(x\)</span> 位上放这个数。投影到平面直角坐标系上就是从 <span class="math inline">\((j,i)\)</span> 走到 <span class="math inline">\((n+1,n)\)</span> 不能越过 <span class="math inline">\(y=x+1\)</span> 的方案数，这是经典容斥。</p>
<h4 id="你的名字">你的名字</h4>
<p>大力 SAM 加线段树合并。</p>
<p>求解过程就是先对该串建 SAM 去重，每个右端点有一个 <span class="math inline">\([1,l1]\)</span> 的左端点限制。</p>
<p>然后放在大串的 SAM 上查，每个右端点有一个 <span class="math inline">\([l2,i]\)</span> 的左端点限制。</p>
<p>然后就可以求出来每个左端点的范围了。</p>
<p>然后直接计算即可。</p>
<h4 id="屠龙勇士">屠龙勇士</h4>
<p>细节比较多的白给 exCRT。</p>
<p>需要特别注意 exCRT 部分的细节实现。</p>
<p>反正就一模板加细节题。</p>
<h4 id="情报中心">情报中心</h4>
<p>测试点 <span class="math inline">\(1\sim 4\)</span> 白给分。</p>
<p><span class="math inline">\(c_i=0\)</span> 有交就行，求出每条边的最长次长链即可。</p>
<p>剩下的差不多得了。</p>
<h4 id="多边形">多边形</h4>
<p>前 <span class="math inline">\(20\)</span> 状压 DP 白给分。</p>
<p>考虑 <span class="math inline">\(K=1\)</span>，不难发现走过的叶子一定是连续的。不然在中间的叶子就被困住了。</p>
<p>所以直接枚举第一个经过的叶子，最后经过的叶子就是它后面的那个叶子，剩下的部分就要求每个子树可以从最小标号的叶子进去，从最大标号的叶子出来且所有点都遍历到。</p>
<p>考虑 DP，设 <span class="math inline">\(f_{i,0/1,0/1,0/1}\)</span> 表示节点 <span class="math inline">\(i\)</span> 的子树，<span class="math inline">\(i\)</span> 号节点有没有被遍历到，<span class="math inline">\(i\)</span> 号节点有没有属于一个往下走到当前子树最小标号的叶子的路径，<span class="math inline">\(i\)</span> 号节点有没有属于一个从当前子树最大标号的叶子往上走的路径，大力讨论转移即可。</p>
<p>枚举之后，树就被切成了森林，每个森林 <span class="math inline">\(f_{root,1,0,0}\)</span> 的乘积就是答案。</p>
<p><span class="math inline">\(50\)</span> 差不多了。</p>
<h4 id="总结-1">总结</h4>
<p>考察算法全面，类型新颖，部分分足，区分度高，不失为一套好 NOI 题。</p>
<p><del>正经的总结懒得写。</del></p>
<hr />
<h3 id="noi-2019">NOI 2019</h3>
<h4 id="回家路线">回家路线</h4>
<h4 id="机器人">机器人</h4>
<p>区间 DP 显然。</p>
<p>设 <span class="math inline">\(f_{l,r,x}\)</span> 表示区间 <span class="math inline">\(l,r\)</span> 且最大值上限为 <span class="math inline">\(x\)</span> 的方案数。因为题目限制有用的 <span class="math inline">\(l,r\)</span> 很少。而 <span class="math inline">\(x\)</span> 可以做前缀和。</p>
<p>可以发现 <span class="math inline">\(f_{p,p}\)</span> 的前缀和在值域上是一个一次三段分段函数。所以 <span class="math inline">\(f_{l+1,r}\)</span> 是一个二次五段分段函数，故 <span class="math inline">\(f_{l,l+1}\)</span> 的前缀和是一个三次分段函数。</p>
<p>所以 <span class="math inline">\(f_{l,r}\)</span> 是一个 <span class="math inline">\(r-l+1\)</span> 次分段函数，且段数为 <span class="math inline">\(O(r-l+1)\)</span> 级别。</p>
<p>维护多项式不好求前缀和以及乘法，但是可以直接维护 <span class="math inline">\(O(n)\)</span> 个点值，需要求某个具体点的点值的时候直接拉格朗日插值即可。为了方便维护的点值可以连续，插值的复杂度就是 <span class="math inline">\(O(n\log mod)\)</span>，因为要求逆元。</p>
<p>似乎有效的 <span class="math inline">\(l,r\)</span> 个数是 <span class="math inline">\(O(n)\)</span> 级别的，所以总复杂度大约是 <span class="math inline">\(O(n^3\log mod)\)</span> 的。当然可以预处理逆元降低一些复杂度。</p>
<h4 id="序列">序列</h4>
<p>模拟费用流入坑题。</p>
<p>冷静分析不难，细节稍多。</p>
<p><a target="_blank" rel="noopener" href="https://daniel-yuan.github.io/2021/01/26/NOI2019-%E5%BA%8F%E5%88%97-%E9%A2%98%E8%A7%A3/">看我看我看我</a></p>
<p><del>才不会告诉你是博主懒</del>。</p>
<h4 id="弹跳">弹跳</h4>
<p>KD-Tree 优化最短路。</p>
<p>众所周知线段树可以优化一维最短路。</p>
<p>为了让空间不炸，所以用 KD-Tree 优化二维最短路。</p>
<p>时间复杂度 <span class="math inline">\(O(n\sqrt{n})\)</span>，空间复杂度 <span class="math inline">\(O(n)\)</span>。</p>
<h4 id="斗主地">斗主地</h4>
<p>期望 DP。</p>
<p>不难发现两堆牌顺序不变，剩下组合的所有情况出现的概率都是相同的。</p>
<p>所以直接大力 DP，40 分有手就行。</p>
<p>考虑优化，打表可以发现一次函数的期望还是一次函数。大胆猜测二次函数的期望还是二次函数。随便写写就过了。</p>
<p>考虑证明。先考虑 <span class="math inline">\(f(i)=i\)</span>，即 <span class="math inline">\(f(i)=c+di\)</span>。设新的 <span class="math inline">\(f\)</span> 为 <span class="math inline">\(F\)</span>。下面先讨论左半部分，设其大小为 <span class="math inline">\(L\)</span>。</p>
<p><span class="math display">\[
\begin{aligned}
{n\choose L}F(x)&amp;=\sum_{i=1}^L{x-1\choose i-1}{n-x\choose L-i}(c+di)\\
&amp;=c\sum_{i=1}^L{x-1\choose i-1}{n-x\choose L-i}+d\sum_{i=1}^Li{x-1\choose i-1}{n-x\choose L-i}\\
&amp;=c{n-1\choose L-1}+d\sum_{i=1}^L(i-1){x-1\choose i-1}{n-x\choose L-i}+d\sum_{i=1}^L{x-1\choose i-1}{n-x\choose L-i}\\
&amp;=(c+d){n-1\choose L-1}+d\sum_{i=1}^L(x-1){x-2\choose i-2}{n-x\choose L-i}\\
&amp;=(c+d){n-1\choose L-1}+d(x-1){n-2\choose L-2}
\end{aligned}
\]</span></p>
<p>可以发现 <span class="math inline">\(F(x)-F(x-1)\)</span> 是定值。所以 <span class="math inline">\(F\)</span> 也是一个一次函数。</p>
<p>类似的，应该也可以证明二次函数的性质。</p>
<h4 id="i-君的探险">I 君的探险</h4>
<p>只会 <span class="math inline">\(68\)</span>，无了。</p>
<p>前面的 <span class="math inline">\(20\)</span> 分有手就行。</p>
<p>对于后面的 ABCD，有一个通用的但是没有办法扩展的做法。</p>
<p>考虑二进制分组，这样对每个点可以求出与它连边的点的异或和。</p>
<p>对于 A，每个点度数只有 <span class="math inline">\(1\)</span> 直接输出。</p>
<p>对于 B，从后往前扫，当前点 <span class="math inline">\(x\)</span> 的异或和 <span class="math inline">\(y\)</span> 就是小于它的唯一与它连边的点，然后把 <span class="math inline">\(y\)</span> 异或和异或上 <span class="math inline">\(x\)</span>。</p>
<p>对于 C，全部点亮一遍，叶子的状态不会发生改变。然后直接一遍推。</p>
<p>对于 D，考虑一层一层剥叶子。先考虑所有点，如果一个点 <span class="math inline">\(x\)</span> 和它的异或和 <span class="math inline">\(y\)</span> 真的有边，且加上这条边之后 <span class="math inline">\(x\)</span> 已经记录完了，那么 <span class="math inline">\(x\)</span> 就是叶子。然后就剥完了一层叶子。对于第二层，扫所有点复杂度就假了，但是这一层的叶子一定和上一层的叶子有边，所以就只用考虑那些点。这个过程每个点的贡献都是自己一次，自己的爹一次，复杂度正确。</p>
<p>后面的就不会了，但是前面的 <span class="math inline">\(68\)</span> 分简洁好想，后面的 <span class="math inline">\(32\)</span> 分怎么想都想不出来，这 <span class="math inline">\(32\)</span> 分不要也罢。</p>
<h4 id="总结-2">总结</h4>
<p>考察算法全面，类型新颖，部分分足，区分度高，不失为一套好 NOI 题。</p>
<p><del>正经的总结懒得写。</del></p>
<hr />
<h3 id="noi-2020">NOI 2020</h3>
<h4 id="美食家">美食家</h4>
<p>暴力 DP 有手就行。</p>
<p>矩阵优化显然。</p>
<p>直接矩阵快速幂优化，复杂度三次方不得行。</p>
<p>发现转移都是向量乘矩阵，预处理 <span class="math inline">\(2^t\)</span> 的矩阵之后，在转移的时候直接平方复杂度的向量乘矩阵即可。</p>
<h4 id="命运">命运</h4>
<p><span class="math inline">\(O(n^2)\)</span> DP 显然。</p>
<p>考虑线段树合并优化 DP 转移。</p>
<p>线段树下标表示的就是 DP 第二维的下标。</p>
<p>合并的时候 <span class="math inline">\(f_{now,i}\)</span> 乘的是 <span class="math inline">\(f_{son,j}(j\leq i)\)</span>，<span class="math inline">\(f_{son,i}\)</span> 乘的是 <span class="math inline">\(f_{now,j}(j&lt;i)\)</span>。</p>
<p>在线段树合并的时候，同时下传当前位置左边的 DP 值的和。那么在合并到指定位置的时候，需要乘的系数就已经求出来了。</p>
<p>因为 DP 问题，这个线段树还需要维护区间求和，区间乘，单点赋值等，但都不难写，唯一需要注意的是需要先合并右儿子再合并左儿子，因为左对右有影响。</p>
<p>复杂度 <span class="math inline">\(O(n\log n)\)</span>。</p>
<h4 id="时代的眼泪">时代的眼泪</h4>
<p>大力四维莫队 <span class="math inline">\(O(n^{\frac{7}{4}})\)</span> 加上一个人均特殊性质 A 就有 <span class="math inline">\(52\)</span> 分了。</p>
<p>根号算法爬。</p>
<h4 id="制作菜品">制作菜品</h4>
<p>厉害的构造题。</p>
<p>特殊性质有大用。</p>
<p><a href="">稍后填坑，先咕着</a></p>
<h4 id="超现实树">超现实树</h4>
<p>厉害的思维题。</p>
<p>特殊性质有大用。</p>
<p><a href="">稍后填坑，先咕着</a></p>
<h4 id="翻修道路">翻修道路</h4>
<p>菜鸡博主不会弦图。</p>
<p>不会弦图的 OIer 大型自闭现场。</p>
<p>爆零得了，不在乎这几分。</p>
<h4 id="总结-3">总结</h4>
<p>考察算法全面，类型新颖，部分分足，区分度高，不失为一套好 NOI 题。</p>
<p><del>正经的总结懒得写。</del></p>
<hr />
<p>不放代码了，不然显得博客又臭又长。</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/NOI/" rel="tag"># NOI</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/05/02/Dan-%E7%9A%84%E7%8A%AF%E5%82%BB%E5%90%88%E9%9B%86/" rel="prev" title="Dan 的犯傻合集">
      <i class="fa fa-chevron-left"></i> Dan 的犯傻合集
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#noi-2017"><span class="nav-number">1.</span> <span class="nav-text">NOI 2017</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B4%E6%95%B0"><span class="nav-number">1.1.</span> <span class="nav-text">整数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%9A%AF%E8%9A%93%E6%8E%92%E9%98%9F"><span class="nav-number">1.2.</span> <span class="nav-text">蚯蚓排队</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%B3%E6%B1%A0"><span class="nav-number">1.3.</span> <span class="nav-text">泳池</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%B8%E6%88%8F"><span class="nav-number">1.4.</span> <span class="nav-text">游戏</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%94%AC%E8%8F%9C"><span class="nav-number">1.5.</span> <span class="nav-text">蔬菜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E8%BA%AB%E6%9C%AF"><span class="nav-number">1.6.</span> <span class="nav-text">分身术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">1.7.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#noi-2018"><span class="nav-number">2.</span> <span class="nav-text">NOI 2018</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BD%92%E7%A8%8B"><span class="nav-number">2.1.</span> <span class="nav-text">归程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F"><span class="nav-number">2.2.</span> <span class="nav-text">冒泡排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%97"><span class="nav-number">2.3.</span> <span class="nav-text">你的名字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%A0%E9%BE%99%E5%8B%87%E5%A3%AB"><span class="nav-number">2.4.</span> <span class="nav-text">屠龙勇士</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%83%85%E6%8A%A5%E4%B8%AD%E5%BF%83"><span class="nav-number">2.5.</span> <span class="nav-text">情报中心</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%BE%B9%E5%BD%A2"><span class="nav-number">2.6.</span> <span class="nav-text">多边形</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-1"><span class="nav-number">2.7.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#noi-2019"><span class="nav-number">3.</span> <span class="nav-text">NOI 2019</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9E%E5%AE%B6%E8%B7%AF%E7%BA%BF"><span class="nav-number">3.1.</span> <span class="nav-text">回家路线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="nav-number">3.2.</span> <span class="nav-text">机器人</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%8F%E5%88%97"><span class="nav-number">3.3.</span> <span class="nav-text">序列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%B9%E8%B7%B3"><span class="nav-number">3.4.</span> <span class="nav-text">弹跳</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%97%E4%B8%BB%E5%9C%B0"><span class="nav-number">3.5.</span> <span class="nav-text">斗主地</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#i-%E5%90%9B%E7%9A%84%E6%8E%A2%E9%99%A9"><span class="nav-number">3.6.</span> <span class="nav-text">I 君的探险</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-2"><span class="nav-number">3.7.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#noi-2020"><span class="nav-number">4.</span> <span class="nav-text">NOI 2020</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BE%8E%E9%A3%9F%E5%AE%B6"><span class="nav-number">4.1.</span> <span class="nav-text">美食家</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%BD%E8%BF%90"><span class="nav-number">4.2.</span> <span class="nav-text">命运</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%B6%E4%BB%A3%E7%9A%84%E7%9C%BC%E6%B3%AA"><span class="nav-number">4.3.</span> <span class="nav-text">时代的眼泪</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E8%8F%9C%E5%93%81"><span class="nav-number">4.4.</span> <span class="nav-text">制作菜品</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B6%85%E7%8E%B0%E5%AE%9E%E6%A0%91"><span class="nav-number">4.5.</span> <span class="nav-text">超现实树</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BF%BB%E4%BF%AE%E9%81%93%E8%B7%AF"><span class="nav-number">4.6.</span> <span class="nav-text">翻修道路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-3"><span class="nav-number">4.7.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Daniel_yuan"
      src="/images/duck.jpg">
  <p class="site-author-name" itemprop="name">Daniel_yuan</p>
  <div class="site-description" itemprop="description">Fkami is our sun !</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">51</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Daniel-yuan" title="GitHub → https://github.com/Daniel-yuan" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:576311436@qq.com" title="E-Mail → mailto:576311436@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.luogu.com.cn/user/71955" title="Luogu → https://www.luogu.com.cn/user/71955" rel="noopener" target="_blank"><i class="fa fa-code fa-fw"></i>Luogu</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://codeforces.com/profile/Daniel_yuan" title="Codeforces → http://codeforces.com/profile/Daniel_yuan" rel="noopener" target="_blank"><i class="fa fa-code fa-fw"></i>Codeforces</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://atcoder.jp/users/Daniel_yuan" title="Atcoder → https://atcoder.jp/users/Daniel_yuan" rel="noopener" target="_blank"><i class="fa fa-code fa-fw"></i>Atcoder</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/daniel-56-24" title="Zhihu → https://www.zhihu.com/people/daniel-56-24" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>Zhihu</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/imakf/" title="https://www.cnblogs.com/imakf/" rel="noopener" target="_blank">Imakf</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/lsq147/" title="https://www.cnblogs.com/lsq147/" rel="noopener" target="_blank">xiaolilsq</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://clamee.github.io/" title="https://clamee.github.io/" rel="noopener" target="_blank">fhs_lzx</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/lightmain-blog/p/" title="https://www.cnblogs.com/lightmain-blog/p/" rel="noopener" target="_blank">lightmain</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/zjy123456" title="https://www.cnblogs.com/zjy123456" rel="noopener" target="_blank">春日野悠</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.luogu.com.cn/blog/emmmwelcome/#" title="https://www.luogu.com.cn/blog/emmmwelcome/#" rel="noopener" target="_blank">TUIFEI_oier</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://zzt.blog.luogu.org/#" title="https://zzt.blog.luogu.org/#" rel="noopener" target="_blank">zzt</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/parauni-blog" title="https://www.cnblogs.com/parauni-blog" rel="noopener" target="_blank">ovor</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.luogu.com.cn/blog/CYJian/#" title="https://www.luogu.com.cn/blog/CYJian/#" rel="noopener" target="_blank">CYJian</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://kewth.blog.luogu.org/#" title="https://kewth.blog.luogu.org/#" rel="noopener" target="_blank">Kewth</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.luogu.com.cn/blog/hwb20030213/#" title="https://www.luogu.com.cn/blog/hwb20030213/#" rel="noopener" target="_blank">BoXe</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/Soulist" title="https://www.cnblogs.com/Soulist" rel="noopener" target="_blank">Soulist</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://zhy12138.github.io/" title="https://zhy12138.github.io/" rel="noopener" target="_blank">zhy</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://lightfom.github.io/" title="https://lightfom.github.io/" rel="noopener" target="_blank">wrp</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Daniel_yuan</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">115k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:45</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '52f741e6e891f7354c3d',
      clientSecret: 'fa1c332093ad3dc847f29ec40b477024c700fc0d',
      repo        : 'daniel-yuan.github.io',
      owner       : 'daniel-yuan',
      admin       : ['daniel-yuan'],
      id          : 'b2833ae29b75b6aae7ff6ef74f9e3716',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

<script type="text/javascript" src="/js/fold_action.js"></script>
</body>
</html>
